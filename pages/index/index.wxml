<!--pages/index/index.wxml-->
<view class="schedule-container" style="{{pageContentPaddingTop}}">
  <!-- 自定义导航栏，直接绑定样式 -->
  <view class="custom-nav-bar" style="{{navBarStyle}}">
    <!-- 内容区，也直接绑定样式 -->
    <view class="nav-content" style="{{navContentStyle}}">
      <picker class="week-picker-in-nav" range="{{weekPickerRange}}" bindchange="onWeekChange">
        <view class="current-week-display">
          第 {{currentWeek}} 周 
          <image class="dropdown-icon" src="/assets/images/arrow-down.jpg"></image>
        </view>
      </picker>
    </view>
  </view>
  
  <!-- 这是注释：用于显示周一到周日 -->
  <view class="header-row">
    <view class="header-placeholder">
      <!-- 在左上角显示月份 -->
      <view class="month-char">{{currentMonth}}</view>
      <view class="month-char">月</view>
    </view>
    <view class="weekdays-container">
      <view class="header-cell {{idx + 1 === todayIndex ? 'today-highlight' : ''}}" 
        wx:for="{{weekdays}}" wx:for-index="idx" wx:key="idx">
        <!-- 上下排列显示星期和日期 -->
        <view class="weekday-text">{{item}}</view>
        <view class="date-text">{{dateList[idx]}}</view>
      </view>
    </view>
  </view>

  <!-- 课程表主体 -->
  <view class="main-content">
  <!-- 左侧时间列 -->
  <view class="time-column">
    <!-- wx:for 的 item 和 index 可以自定义名字 -->
    <view class="time-cell {{idx === currentTimeIndex ? 'current-time-highlight' : ''}}"
      wx:for="{{timeSections}}" wx:for-item="section" wx:for-index="idx" wx:key="idx">
      <view class="section-number">{{section}}</view>
      <view class="section-time">{{sectionTimes[idx].start}}-{{sectionTimes[idx].end}}</view>
    </view>
  </view>
    <!-- 右侧课程格子区域 -->
    <view class="courses-grid">
    <!-- 循环渲染课程项目 -->
      <view 
        wx:for="{{coursesToRender}}" 
        wx:key="index" 
        class="course-item" 
        style="{{item.styleStr}}" 
        bind:tap="showCourseDetail" 
        data-course-index="{{index}}" 
        bind:longpress="deleteCourse"
        >
        <view class="course-name">{{item.name}}</view>
        <view class="course-teacher">{{item.teacher}}</view>
        <view class="course-location">@{{item.location}}</view>
      </view>
    </view>
      
  </view>
  <view class="add-button" bind:tap="navigateToAddCourse">+</view>
</view>